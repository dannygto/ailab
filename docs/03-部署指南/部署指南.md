# AILAB å¹³å°éƒ¨ç½²è¿ç»´æŒ‡å—

## ğŸ“ éƒ¨ç½²æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†AILABå¹³å°çš„éƒ¨ç½²æµç¨‹ï¼ŒåŒ…æ‹¬å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„éƒ¨ç½²æ–¹æ³•ã€‚

## ğŸš€ å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨

### Windowså¼€å‘ç¯å¢ƒ(å½“å‰æ¨èæ–¹å¼)

#### æ–¹æ³•1: æ ‡å‡†å¯åŠ¨è„šæœ¬ âœ…
```powershell
# é¡¹ç›®æ ¹ç›®å½• D:\ailab

# å¯åŠ¨å‰åç«¯æœåŠ¡
powershell -ExecutionPolicy Bypass -File "D:\ailab\scripts\startup\start-dev.ps1"

# åˆ†åˆ«å¯åŠ¨æœåŠ¡
powershell -ExecutionPolicy Bypass -File "D:\ailab\scripts\startup\start-dev.ps1" -Frontend  # ä»…å‰ç«¯
powershell -ExecutionPolicy Bypass -File "D:\ailab\scripts\startup\start-dev.ps1" -Backend   # ä»…åç«¯

# åœæ­¢æ‰€æœ‰æœåŠ¡
powershell -ExecutionPolicy Bypass -File "D:\ailab\scripts\startup\start-dev.ps1" -Stop
```

#### æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨ âœ…
```powershell
# åç«¯æœåŠ¡ (ç«¯å£: 3001)
Set-Location "D:\ailab\src\backend"
node "D:\ailab\src\backend\simple-start.js"

# å‰ç«¯æœåŠ¡ (ç«¯å£: 3000) - æ–°ç»ˆç«¯
Set-Location "D:\ailab\src\frontend"
node "D:\ailab\src\frontend\node_modules\react-scripts\bin\react-scripts.js" start
```

#### æœåŠ¡éªŒè¯
- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **åç«¯å¥åº·æ£€æŸ¥**: http://localhost:3001/api/health  
- **åç«¯æ•°æ®æ¥å£**: http://localhost:3001/api/dashboard/stats

### å¼€å‘ç¯å¢ƒè¯´æ˜
- **æ•°æ®åº“**: å¼€å‘æ¨¡å¼ä½¿ç”¨Mockæ•°æ®ï¼Œæ— éœ€é…ç½®MongoDB
- **å®æ—¶é€šä¿¡**: WebSocketè‡ªåŠ¨å¯ç”¨
- **çƒ­é‡è½½**: å‰ç«¯ä»£ç ä¿®æ”¹è‡ªåŠ¨åˆ·æ–°

## ç¯å¢ƒè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

#### æœ€å°é…ç½®
- **CPU**: 4æ ¸å¿ƒ 2.0GHz
- **å†…å­˜**: 8GB RAM
- **å­˜å‚¨**: 50GB SSD
- **ç½‘ç»œ**: 100Mbps

#### æ¨èé…ç½®
- **CPU**: 8æ ¸å¿ƒ 2.5GHz
- **å†…å­˜**: 16GB RAM
- **å­˜å‚¨**: 100GB SSD
- **ç½‘ç»œ**: 1Gbps

### è½¯ä»¶è¦æ±‚

#### å¼€å‘ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS, Linux
- **Node.js**: v16.x LTS+
- **npm**: v8.x+
- **æµè§ˆå™¨**: Chrome 90+, Firefox 90+, Edge 90+

#### æµ‹è¯•/ç”Ÿäº§ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 18.04/20.04 LTS, CentOS 7/8
- **Node.js**: v16.x LTS+
- **MongoDB**: v4.4+
- **Redis**: v6.0+ (å¯é€‰ï¼Œç”¨äºç¼“å­˜)
- **Python**: v3.8+ (ç”¨äºAIæœåŠ¡)
- **Docker**: v20.10+ (Dockeréƒ¨ç½²æ–¹å¼)
- **Docker Compose**: v2.0+ (Dockeréƒ¨ç½²æ–¹å¼)

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

AILABå¹³å°æä¾›å¤šç§ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ–¹å¼ï¼Œä»¥é€‚åº”ä¸åŒçš„æœåŠ¡å™¨ç¯å¢ƒå’Œè¿ç»´éœ€æ±‚ã€‚

### 1. LinuxæœåŠ¡å™¨éƒ¨ç½²ï¼ˆéDockeræ–¹å¼ï¼‰

ä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥å°†AILABå¹³å°ç›´æ¥éƒ¨ç½²åœ¨LinuxæœåŠ¡å™¨ä¸Šï¼Œæ— éœ€Dockerå®¹å™¨åŒ–ã€‚é€‚åˆå•æœåŠ¡å™¨ç¯å¢ƒæˆ–ä¸ä¾¿ä½¿ç”¨Dockerçš„åœºæ™¯ã€‚

è¯¦ç»†éƒ¨ç½²æµç¨‹è¯·å‚è€ƒï¼š[LinuxæœåŠ¡å™¨éDockeréƒ¨ç½²æŒ‡å—](LinuxæœåŠ¡å™¨éDockeréƒ¨ç½²æŒ‡å—.md)

ä¸»è¦ç‰¹ç‚¹ï¼š
- ä½¿ç”¨PM2è¿›è¡Œè¿›ç¨‹ç®¡ç†
- æ”¯æŒå‰åç«¯å’ŒAIæœåŠ¡ç»„ä»¶éƒ¨ç½²
- æä¾›å¥åº·æ£€æŸ¥å’ŒæœåŠ¡ç®¡ç†è„šæœ¬
- é€‚ç”¨äºUbuntu/CentOSç­‰ä¸»æµLinuxå‘è¡Œç‰ˆ

### 2. Dockeréƒ¨ç½²æ–¹å¼

ä½¿ç”¨Dockerå®¹å™¨åŒ–æŠ€æœ¯éƒ¨ç½²AILABå¹³å°ï¼Œæä¾›æ›´å¥½çš„ç¯å¢ƒéš”ç¦»å’Œå¯ç§»æ¤æ€§ã€‚

è¯¦ç»†éƒ¨ç½²æµç¨‹è¯·å‚è€ƒï¼š[Dockeréƒ¨ç½²æŒ‡å—](Dockeréƒ¨ç½²æŒ‡å—.md)

ä¸»è¦ç‰¹ç‚¹ï¼š
- ç¯å¢ƒä¸€è‡´æ€§å’Œéš”ç¦»æ€§å¼º
- æ”¯æŒå¿«é€Ÿæ‰©å±•å’Œè¿ç§»
- ä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š
- é€‚ç”¨äºå„ç§æ”¯æŒDockerçš„æ“ä½œç³»ç»Ÿ

## ç»´æŠ¤ä¸ç›‘æ§

### æ—¥å¿—ç®¡ç†

#### éDockerç¯å¢ƒ
```bash
# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
pm2 logs ailab-frontend

# æŸ¥çœ‹åç«¯æ—¥å¿—
pm2 logs ailab-backend

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
pm2 logs
```

#### Dockerç¯å¢ƒ
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker-compose logs frontend
docker-compose logs backend
docker-compose logs mongodb

# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose logs
```

### å¥åº·æ£€æŸ¥

```bash
# éDockerç¯å¢ƒ
cd /opt/ailab
node scripts/health-check.js

# Dockerç¯å¢ƒ
docker-compose exec backend node scripts/health-check.js
```

### æ•°æ®å¤‡ä»½

```bash
# MongoDBæ•°æ®å¤‡ä»½
mongodump --db ailab --out /backup/$(date +%Y%m%d)

# è‡ªåŠ¨å¤‡ä»½è„šæœ¬
cat > /opt/ailab/scripts/backup.sh << EOF
#!/bin/bash
BACKUP_DIR="/opt/ailab/backup/\$(date +%Y%m%d)"
mkdir -p \$BACKUP_DIR
mongodump --db ailab --out \$BACKUP_DIR
find /opt/ailab/backup -type d -mtime +7 -exec rm -rf {} \;
EOF

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x /opt/ailab/scripts/backup.sh

# æ·»åŠ å®šæ—¶ä»»åŠ¡
(crontab -l 2>/dev/null; echo "0 2 * * * /opt/ailab/scripts/backup.sh") | crontab -
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. å‰ç«¯æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥å‰ç«¯æœåŠ¡çŠ¶æ€
pm2 status ailab-frontend

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tunlp | grep 3000

# é‡å¯å‰ç«¯æœåŠ¡
pm2 restart ailab-frontend
```

#### 2. åç«¯APIæ— å“åº”

```bash
# æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
pm2 status ailab-backend

# æ£€æŸ¥æ—¥å¿—
pm2 logs ailab-backend

# é‡å¯åç«¯æœåŠ¡
pm2 restart ailab-backend
```

#### 3. MongoDBè¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥MongoDBæœåŠ¡çŠ¶æ€
systemctl status mongodb

# å¯åŠ¨MongoDB
systemctl start mongodb
systemctl enable mongodb

# æ£€æŸ¥MongoDBæ—¥å¿—
cat /var/log/mongodb/mongodb.log
```

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

1. **å¯ç”¨Nginxç¼“å­˜**
```nginx
location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires 30d;
    add_header Cache-Control "public, no-transform";
}
```

2. **å¯ç”¨Gzipå‹ç¼©**
```nginx
gzip on;
gzip_comp_level 5;
gzip_min_length 256;
gzip_proxied any;
gzip_types
  application/javascript
  application/json
  application/x-javascript
  text/css
  text/javascript
  text/plain;
```

### åç«¯ä¼˜åŒ–

1. **å¯ç”¨PM2é›†ç¾¤æ¨¡å¼**
```bash
# ä¿®æ”¹ecosystem.config.js
vi /opt/ailab/ecosystem.config.js

# åç«¯æœåŠ¡é…ç½®ä¿®æ”¹
instances: 'max',  // ä½¿ç”¨æ‰€æœ‰å¯ç”¨CPUæ ¸å¿ƒ
exec_mode: 'cluster'  // ä½¿ç”¨é›†ç¾¤æ¨¡å¼
```

2. **MongoDBç´¢å¼•ä¼˜åŒ–**
```bash
mongo
use ailab
db.schools.createIndex({ code: 1 }, { unique: true })
```

## å®‰å…¨åŠ å›º

### 1. ä½¿ç”¨HTTPS

```bash
# ä½¿ç”¨Let's Encryptè·å–è¯ä¹¦
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d yourdomain.com

# è¯ä¹¦è‡ªåŠ¨æ›´æ–°
sudo certbot renew --dry-run
```

### 2. é˜²ç«å¢™é…ç½®

```bash
# ä»…å¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443
sudo ufw enable
```

### 3. MongoDBå®‰å…¨è®¾ç½®

```bash
# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
mongo
use admin
db.createUser({
  user: "admin",
  pwd: "secure_password",
  roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]
})

# å¯ç”¨è®¤è¯
sudo vi /etc/mongod.conf
# æ·»åŠ ä»¥ä¸‹é…ç½®
security:
  authorization: enabled
```

## ç‰ˆæœ¬å‡çº§

### éDockerç¯å¢ƒ

```bash
# 1. å¤‡ä»½æ•°æ®åº“å’Œé…ç½®
mongodump --db ailab --out /backup/$(date +%Y%m%d)
cp -r /opt/ailab/config /backup/config-$(date +%Y%m%d)

# 2. æ‹‰å–æœ€æ–°ä»£ç 
cd /opt/ailab
git pull

# 3. å®‰è£…ä¾èµ–
cd /opt/ailab/src/backend
npm install

cd /opt/ailab/src/frontend
npm install

# 4. é‡æ–°æ„å»ºå‰ç«¯
npm run build

# 5. é‡å¯æœåŠ¡
pm2 restart all
```

### Dockerç¯å¢ƒ

```bash
# 1. æ‹‰å–æœ€æ–°é•œåƒ
docker-compose pull

# 2. é‡æ–°æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d --build
```

## é™„å½•

### ç›®å½•ç»“æ„

```
ailab/
â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ backup/           # å¤‡ä»½é…ç½®
â”‚   â”œâ”€â”€ deployment/       # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ environment/      # ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ logging/          # æ—¥å¿—é…ç½®
â”‚   â”œâ”€â”€ monitoring/       # ç›‘æ§é…ç½®
â”‚   â”œâ”€â”€ nginx/            # Nginxé…ç½®
â”‚   â”œâ”€â”€ security/         # å®‰å…¨é…ç½®
â”‚   â””â”€â”€ ssl/              # SSLé…ç½®
â”œâ”€â”€ docker/               # Dockeré…ç½®ç›®å½•
â”œâ”€â”€ docs/                 # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ scripts/              # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ deployment/       # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ maintenance/      # ç»´æŠ¤è„šæœ¬
â”‚   â”œâ”€â”€ startup/          # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ testing/          # æµ‹è¯•è„šæœ¬
â””â”€â”€ src/                  # æºä»£ç ç›®å½•
    â”œâ”€â”€ backend/          # åç«¯ä»£ç 
    â”œâ”€â”€ frontend/         # å‰ç«¯ä»£ç 
    â””â”€â”€ ai-service/       # AIæœåŠ¡ä»£ç 
```

### ç¯å¢ƒå˜é‡å‚è€ƒ

#### åç«¯ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| PORT | åç«¯æœåŠ¡ç«¯å£ | 3001 |
| NODE_ENV | è¿è¡Œç¯å¢ƒ | production |
| DATABASE_URL | MongoDBè¿æ¥URI | mongodb://localhost:27017/ailab |
| JWT_SECRET | JWTå¯†é’¥ | ailab-secret-key |
| REDIS_URL | Redisè¿æ¥URI | redis://localhost:6379 |
| CORS_ORIGIN | è·¨åŸŸè¯·æ±‚æº | http://localhost:3000 |

#### å‰ç«¯ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| REACT_APP_API_URL | åç«¯APIåœ°å€ | http://localhost:3001/api |
| REACT_APP_WS_URL | WebSocketåœ°å€ | ws://localhost:3001 |
| PORT | å‰ç«¯æœåŠ¡ç«¯å£ | 3000 |

---

**ç‰ˆæœ¬**: 3.1.0
**æ›´æ–°æ—¥æœŸ**: 2025-07-12
