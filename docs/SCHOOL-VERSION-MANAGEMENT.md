# AILABå¹³å°ç‰ˆæœ¬åŒºåˆ†æ–¹æ¡ˆæ€»ç»“

## ğŸ“‹ ç‰ˆæœ¬åŒºåˆ†è®¾è®¡

### 1. **ç‰ˆæœ¬ç±»å‹**
- **æ™®æ•™ç‰ˆ (general)** - é¢å‘æ™®é€šä¸­å°å­¦
- **èŒæ•™ç‰ˆ (vocational)** - é¢å‘èŒä¸šå­¦æ ¡  
- **é«˜æ ¡ç‰ˆ (higher)** - é¢å‘å¤§å­¦é™¢æ ¡

### 2. **åŒºåˆ†æœºåˆ¶**

#### ğŸ”§ **ç¯å¢ƒå˜é‡é…ç½®**
```bash
# æ ¸å¿ƒç¯å¢ƒå˜é‡
AILAB_EDITION=general|vocational|higher
AILAB_SCHOOL_ID=demo-school-001
AILAB_SCHOOL_NAME=ç¤ºèŒƒå­¦æ ¡
```

#### ğŸ“ **é…ç½®æ–‡ä»¶é©±åŠ¨**
- `config/deployment/edition.config.json` - ç‰ˆæœ¬ä¸»é…ç½®
- `config/deployment/.env.{edition}` - ç¯å¢ƒå˜é‡æ–‡ä»¶
- `config/deployment/ecosystem.{edition}.config.js` - PM2é…ç½®
- `src/frontend/public/config/app-config.{edition}.json` - å‰ç«¯é…ç½®

#### ğŸš€ **éƒ¨ç½²è„šæœ¬**
```bash
# ç”Ÿæˆç‰ˆæœ¬é…ç½®
./scripts/deployment/generate-edition-config.sh general demo-school-001 "ç¤ºèŒƒå­¦æ ¡"

# ç‰ˆæœ¬åŒ–éƒ¨ç½²
./scripts/deployment/minimal-fix.sh general demo-school-001 "ç¤ºèŒƒå­¦æ ¡"
```

## ğŸ« å­¦æ ¡ä¿¡æ¯ç®¡ç†

### 1. **æ•°æ®ç»“æ„è®¾è®¡**

#### åŸºæœ¬ä¿¡æ¯
```typescript
interface SchoolInfo {
  schoolId: string;           // å­¦æ ¡å”¯ä¸€æ ‡è¯†
  schoolName: string;         // å­¦æ ¡åç§°
  schoolType: SchoolType;     // å­¦æ ¡ç±»å‹
  schoolCode?: string;        // æ•™è‚²éƒ¨é—¨ç¼–ç 
  principalName: string;      // æ ¡é•¿å§“åï¼ˆå¿…å¡«ï¼‰
  establishedYear?: number;   // å»ºæ ¡å¹´ä»½
  // ... æ›´å¤šå­—æ®µ
}
```

#### æ ¡åŒºç®¡ç†
```typescript
interface Campus {
  id: string;
  name: string;
  address: string;
  isMain: boolean;           // ä¸»æ ¡åŒºæ ‡è¯†
  isActive: boolean;         // æ¿€æ´»çŠ¶æ€
  // ... è”ç³»ä¿¡æ¯ç­‰
}
```

### 2. **é»˜è®¤ä¸»æ ¡åŒºæœºåˆ¶**
- âœ… ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºé»˜è®¤ä¸»æ ¡åŒº
- âœ… ä¸»æ ¡åŒºä¸èƒ½ä¸ºç©ºï¼Œä¸å¯åˆ é™¤
- âœ… æ”¯æŒå¤šæ ¡åŒºæ•°æ®éš”ç¦»
- âœ… æ ¡åŒºåˆ‡æ¢æƒé™æ§åˆ¶

## ğŸ¯ ç‰ˆæœ¬ç‰¹æ€§å·®å¼‚

### æ™®æ•™ç‰ˆ (General)
```json
{
  "features": [
    "å®éªŒç®¡ç†", "å­¦ç”Ÿç®¡ç†", "æ•™å¸ˆç®¡ç†", "AIåŠ©æ‰‹",
    "è®¾å¤‡ç®¡ç†", "æ•°æ®åˆ†æ", "æ ¡åŒºç®¡ç†", "è¯¾ç¨‹æ¨¡æ¿"
  ],
  "limits": {
    "maxStudents": 5000,
    "maxTeachers": 500,
    "maxCampuses": 10
  },
  "theme": { "primaryColor": "#1976d2" }
}
```

### èŒæ•™ç‰ˆ (Vocational)
```json
{
  "features": [
    "åŸºç¡€åŠŸèƒ½ +",
    "å®è®­ç®¡ç†", "æŠ€èƒ½è¯„ä¼°", "ä¼ä¸šåˆä½œ", "è®¤è¯ç®¡ç†"
  ],
  "limits": {
    "maxStudents": 8000,
    "maxTeachers": 800,
    "maxCampuses": 15
  },
  "theme": { "primaryColor": "#ff9800" }
}
```

### é«˜æ ¡ç‰ˆ (Higher)
```json
{
  "features": [
    "åŸºç¡€åŠŸèƒ½ +",
    "ç ”ç©¶ç®¡ç†", "å­¦æœ¯åˆ†æ", "è®ºæ–‡ç®¡ç†", "å®éªŒå®¤é¢„çº¦",
    "ç ”ç©¶ç”Ÿç®¡ç†", "åä½œå¹³å°"
  ],
  "limits": {
    "maxStudents": 20000,
    "maxTeachers": 2000,
    "maxCampuses": 20
  },
  "theme": { "primaryColor": "#9c27b0" }
}
```

## ğŸ” éƒ¨ç½²æ¶æ„

### 1. **å•æ ¡éƒ¨ç½²æ¨¡å¼**
- æ¯ä¸ªå­¦æ ¡ç‹¬ç«‹éƒ¨ç½²ä¸€å¥—å®Œæ•´ç³»ç»Ÿ
- æ•°æ®å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°
- æ”¯æŒå­¦æ ¡è‡ªå®šä¹‰é…ç½®å’Œå“ç‰Œ

### 2. **æ ¡åŒºéš”ç¦»æœºåˆ¶**
- ä¸»æ ¡åŒºä½œä¸ºé»˜è®¤æ ¡åŒºï¼Œä¸å¯åˆ é™¤
- åˆ†æ ¡åŒºæ•°æ®ç‹¬ç«‹å­˜å‚¨
- ç”¨æˆ·å¯åˆ‡æ¢æ ¡åŒºï¼ˆå¯é…ç½®æƒé™ï¼‰
- æ•°æ®éš”ç¦»å¼€å…³å¯æ§åˆ¶

### 3. **ç‰ˆæœ¬è¯†åˆ«æµç¨‹**
```
éƒ¨ç½²æ—¶ â†’ ç¯å¢ƒå˜é‡ â†’ é…ç½®æ–‡ä»¶ â†’ å‰ç«¯åŠ è½½ â†’ UIé€‚é…
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
ailab/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ deployment/
â”‚   â”‚   â”œâ”€â”€ edition.config.json              # ç‰ˆæœ¬ä¸»é…ç½®
â”‚   â”‚   â”œâ”€â”€ .env.general                     # æ™®æ•™ç‰ˆç¯å¢ƒå˜é‡
â”‚   â”‚   â”œâ”€â”€ .env.vocational                  # èŒæ•™ç‰ˆç¯å¢ƒå˜é‡
â”‚   â”‚   â”œâ”€â”€ .env.higher                      # é«˜æ ¡ç‰ˆç¯å¢ƒå˜é‡
â”‚   â”‚   â”œâ”€â”€ ecosystem.general.config.js     # æ™®æ•™ç‰ˆPM2é…ç½®
â”‚   â”‚   â”œâ”€â”€ ecosystem.vocational.config.js  # èŒæ•™ç‰ˆPM2é…ç½®
â”‚   â”‚   â””â”€â”€ ecosystem.higher.config.js      # é«˜æ ¡ç‰ˆPM2é…ç½®
â”‚   â””â”€â”€ environment/
â”‚       â””â”€â”€ edition.config.js               # è¿è¡Œæ—¶ç‰ˆæœ¬é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ version.ts               # å‰ç«¯ç‰ˆæœ¬ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ schoolConfig.ts          # å­¦æ ¡é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ pages/settings/
â”‚   â”‚   â”‚       â””â”€â”€ GeneralSettings.tsx     # å­¦æ ¡ä¿¡æ¯è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ public/config/
â”‚   â”‚       â”œâ”€â”€ app-config.general.json     # æ™®æ•™ç‰ˆå‰ç«¯é…ç½®
â”‚   â”‚       â”œâ”€â”€ app-config.vocational.json  # èŒæ•™ç‰ˆå‰ç«¯é…ç½®
â”‚   â”‚       â””â”€â”€ app-config.higher.json      # é«˜æ ¡ç‰ˆå‰ç«¯é…ç½®
â”‚   â””â”€â”€ backend/
â”‚       â””â”€â”€ src/controllers/
â”‚           â””â”€â”€ settings.controller.ts       # åç«¯è®¾ç½®æ§åˆ¶å™¨
â””â”€â”€ scripts/
    â””â”€â”€ deployment/
        â”œâ”€â”€ generate-edition-config.sh       # ç‰ˆæœ¬é…ç½®ç”Ÿæˆè„šæœ¬
        â””â”€â”€ minimal-fix.sh                   # ä¸»éƒ¨ç½²è„šæœ¬
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

### 1. **æ™®æ•™ç‰ˆéƒ¨ç½²**
```bash
# ç”Ÿæˆé…ç½®
./scripts/deployment/generate-edition-config.sh general school-001 "ç¤ºèŒƒå°å­¦"

# éƒ¨ç½²å¯åŠ¨
./scripts/deployment/minimal-fix.sh general school-001 "ç¤ºèŒƒå°å­¦"

# éªŒè¯éƒ¨ç½²
curl http://localhost:3001/api/settings/version
```

### 2. **èŒæ•™ç‰ˆéƒ¨ç½²**
```bash
# ç”Ÿæˆé…ç½®
./scripts/deployment/generate-edition-config.sh vocational tech-001 "èŒä¸šæŠ€æœ¯å­¦æ ¡"

# éƒ¨ç½²å¯åŠ¨
./scripts/deployment/minimal-fix.sh vocational tech-001 "èŒä¸šæŠ€æœ¯å­¦æ ¡"
```

### 3. **é«˜æ ¡ç‰ˆéƒ¨ç½²**
```bash
# ç”Ÿæˆé…ç½®
./scripts/deployment/generate-edition-config.sh higher univ-001 "ç¤ºèŒƒå¤§å­¦"

# éƒ¨ç½²å¯åŠ¨
./scripts/deployment/minimal-fix.sh higher univ-001 "ç¤ºèŒƒå¤§å­¦"
```

## ğŸ“Š ç®¡ç†ç•Œé¢

### å­¦æ ¡ä¿¡æ¯è®¾ç½®é¡µé¢åŠŸèƒ½
- âœ… åŸºæœ¬ä¿¡æ¯ï¼ˆå­¦æ ¡åç§°ã€ç±»å‹ã€æ ¡é•¿ç­‰ï¼‰
- âœ… è”ç³»ä¿¡æ¯ï¼ˆåœ°å€ã€ç”µè¯ã€é‚®ç®±ç­‰ï¼‰
- âœ… å“ç‰Œå½¢è±¡ï¼ˆLogoã€æ ¡è®­ã€ç®€ä»‹ç­‰ï¼‰
- âœ… æ ¡åŒºç®¡ç†ï¼ˆä¸»æ ¡åŒº+åˆ†æ ¡åŒºï¼‰
- âœ… ç³»ç»Ÿé…ç½®ï¼ˆå­¦å¹´ã€å­¦æœŸã€æƒé™ç­‰ï¼‰
- âœ… ç‰ˆæœ¬ä¿¡æ¯æ˜¾ç¤º

### æ•°æ®éªŒè¯
- âœ… å¿…å¡«å­—æ®µéªŒè¯ï¼ˆå­¦æ ¡åç§°ã€æ ¡é•¿å§“åã€åœ°å€ã€ç”µè¯ã€é‚®ç®±ï¼‰
- âœ… ä¸»æ ¡åŒºä¿è¯æœºåˆ¶ï¼ˆè‡³å°‘ä¸€ä¸ªä¸»æ ¡åŒºï¼‰
- âœ… æ•°æ®æ ¼å¼éªŒè¯ï¼ˆé‚®ç®±ã€ç”µè¯ã€ç½‘å€ç­‰ï¼‰

## ğŸ”„ åŒæ­¥æœºåˆ¶

### æœ¬åœ° â†” è¿œç¨‹ â†” Git ä¸‰ç«¯åŒæ­¥
1. æœ¬åœ°ä¿®æ”¹å®Œæˆ â†’ æµ‹è¯•éªŒè¯
2. æ¨é€åˆ°Gitä»“åº“ â†’ ç‰ˆæœ¬æ§åˆ¶
3. è¿œç¨‹æœåŠ¡å™¨æ‹‰å– â†’ è‡ªåŠ¨éƒ¨ç½²

```bash
# åŒæ­¥è„šæœ¬ç¤ºä¾‹
git add -A
git commit -m "feat: å®Œå–„å­¦æ ¡ä¿¡æ¯ç®¡ç†å’Œç‰ˆæœ¬åŒºåˆ†"
git push origin main

# è¿œç¨‹éƒ¨ç½²
ssh -i ailab.pem ubuntu@82.156.75.232 "cd /home/ubuntu/ailab && git pull && ./scripts/deployment/minimal-fix.sh general demo-school-001 'ç¤ºèŒƒå­¦æ ¡'"
```

## âœ… å®ŒæˆçŠ¶æ€

### å·²å®Œæˆ âœ…
- [x] ç‰ˆæœ¬åŒºåˆ†æœºåˆ¶è®¾è®¡
- [x] å­¦æ ¡ä¿¡æ¯æ•°æ®ç»“æ„
- [x] å‰ç«¯è®¾ç½®é¡µé¢é‡æ„
- [x] åç«¯APIæ”¯æŒ
- [x] é»˜è®¤ä¸»æ ¡åŒºæœºåˆ¶
- [x] é…ç½®æ–‡ä»¶ç”Ÿæˆè„šæœ¬
- [x] éƒ¨ç½²è„šæœ¬é›†æˆ
- [x] æ–‡æ¡£å®Œå–„

### å¾…ä¼˜åŒ– ğŸ”„
- [ ] å‰ç«¯UIè¿›ä¸€æ­¥ç¾åŒ–
- [ ] æ ¡åŒºç®¡ç†åŠŸèƒ½å®Œå–„ï¼ˆæ·»åŠ /ç¼–è¾‘/åˆ é™¤æ ¡åŒºç•Œé¢ï¼‰
- [ ] ç‰ˆæœ¬åˆ‡æ¢åŠŸèƒ½ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨
- [ ] ç”¨æˆ·æƒé™ä¸æ ¡åŒºå…³è”
- [ ] æ‰¹é‡æ•°æ®å¯¼å…¥å¯¼å‡º

## ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿

1. **æ¸…æ™°çš„ç‰ˆæœ¬åŒºåˆ†** - é€šè¿‡ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶å®ç°
2. **ä»¥å­¦æ ¡ä¸ºå•ä½** - ç‹¬ç«‹éƒ¨ç½²ï¼Œæ•°æ®éš”ç¦»
3. **é»˜è®¤ä¸»æ ¡åŒº** - ç¡®ä¿åŸºç¡€åŠŸèƒ½æ­£å¸¸è¿è¡Œ
4. **çµæ´»çš„æ ¡åŒºç®¡ç†** - æ”¯æŒå¤šæ ¡åŒºå’Œæ•°æ®éš”ç¦»
5. **ç»Ÿä¸€çš„éƒ¨ç½²æµç¨‹** - ä¸€å¥—è„šæœ¬æ”¯æŒæ‰€æœ‰ç‰ˆæœ¬
6. **å®Œæ•´çš„æ–‡æ¡£æ”¯æŒ** - æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰è¯¦ç»†è¯´æ˜

è¿™ä¸ªæ–¹æ¡ˆç¡®ä¿äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ï¼Œå¹¶ä¸”ç¬¦åˆæ•™è‚²è¡Œä¸šçš„å®é™…éœ€æ±‚ã€‚
