# 人工智能辅助实验平台 - 国际化功能使用指南

## 简介

本文档描述了人工智能辅助实验平台的国际化(i18n)功能实现及使用方法。国际化功能允许应用支持多种语言，目前已实现中文(zh-CN)和英文(en-US)两种语言。

## 核心组件

国际化功能由以下核心组件构成：

1. **i18next** - 国际化框架核心
2. **react-i18next** - React绑定库
3. **i18next-browser-languagedetector** - 浏览器语言检测
4. **i18next-http-backend** - HTTP后端加载翻译

## 目录结构

```
src/
├── i18n/                       # 国际化相关文件
│   ├── index.ts                # i18n初始化配置
│   └── locales/                # 翻译文件
│       ├── zh-CN.json          # 中文翻译
│       └── en-US.json          # 英文翻译
├── components/
│   └── common/
│       └── LanguageSwitcher.tsx # 语言切换组件
├── contexts/
│   └── I18nContext.tsx         # 国际化上下文
├── providers/
│   └── I18nProvider.tsx        # 国际化Provider
├── pages/
│   └── settings/
│       └── InternationalizationPage.tsx # 语言设置页面
└── routes/
    └── I18nRoutes.tsx          # 国际化路由
```

## 使用方法

### 1. 在组件中使用翻译

```tsx
import { useTranslation } from 'react-i18next';

const MyComponent = () => {
  const { t } = useTranslation();
  
  return (
    <div>
      <h1>{t('app.name')}</h1>
      <p>{t('app.description')}</p>
      <button>{t('common.save')}</button>
    </div>
  );
};
```

### 2. 切换语言

```tsx
import { useTranslation } from 'react-i18next';

const LanguageSwitcher = () => {
  const { i18n } = useTranslation();
  
  const changeLanguage = (lang) => {
    i18n.changeLanguage(lang);
    localStorage.setItem('ailab_language', lang);
  };
  
  return (
    <div>
      <button onClick={() => changeLanguage('zh-CN')}>中文</button>
      <button onClick={() => changeLanguage('en-US')}>English</button>
    </div>
  );
};
```

### 3. 添加新的翻译

在 `src/i18n/locales` 目录下对应的语言文件中添加新的翻译键值对。

### 4. 运行国际化演示

执行以下命令启动国际化功能演示：

```bash
npm run i18n-demo
```

然后在浏览器中访问：http://localhost:3001/demo/i18n

## 添加新语言

要添加新语言，需要以下步骤：

1. 在 `src/i18n/locales` 目录下创建新的语言文件，如 `ja-JP.json`
2. 在 `src/i18n/index.ts` 中添加对新语言的支持：

```ts
// 支持的语言
export const LANGUAGES = {
  ZH_CN: 'zh-CN',
  EN_US: 'en-US',
  JA_JP: 'ja-JP',  // 添加新语言
};

// 翻译资源
const resources = {
  [LANGUAGES.ZH_CN]: {
    translation: translationZH,
  },
  [LANGUAGES.EN_US]: {
    translation: translationEN,
  },
  [LANGUAGES.JA_JP]: {
    translation: translationJA,  // 添加新语言翻译
  },
};
```

3. 在语言切换组件中添加新语言选项

## 最佳实践

1. 使用嵌套键值对管理翻译，避免扁平化结构
2. 使用命名空间区分不同模块的翻译
3. 对于表单验证错误等动态内容，使用插值语法
4. 利用 useTranslation hook 在各组件中访问翻译功能

## 技术架构

国际化功能的技术架构如下：

1. i18next作为核心框架处理翻译加载和语言切换
2. react-i18next提供React集成和hooks API
3. 使用Context API管理全局语言状态
4. 支持浏览器语言自动检测
5. 使用localStorage持久化语言选择

---

本文档最后更新于: 2025年7月22日
