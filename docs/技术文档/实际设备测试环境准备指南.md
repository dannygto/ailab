# 实际设备测试环境准备指南

*版本: 1.0.0*
*更新日期: 2025年7月23日*

## 一、概述

本文档提供了设置和准备实际设备测试环境的详细指导，用于AI辅助实验平台的TCP/Socket协议适配器测试。该环境将用于验证平台与各类实验设备的通信和控制功能。

## 二、网络环境配置

### 2.1 网络架构

测试环境应使用独立的网络，与生产环境隔离，包含以下组件：

1. **路由器/交换机**：支持VLAN和网络监控
2. **测试服务器**：运行AI辅助实验平台
3. **实验设备**：各类支持TCP/Socket连接的实验设备
4. **监控工作站**：用于监控和记录测试过程

网络拓扑如下：
```
[测试服务器] ---+
                |
                +--- [路由器/交换机] ---+--- [设备1]
                |                       |
                |                       +--- [设备2]
                |                       |
[监控工作站] ---+                       +--- [设备3]
```

### 2.2 IP地址分配

| 设备类型 | IP地址范围 | 说明 |
|---------|-----------|-----|
| 测试服务器 | 192.168.1.10 | 固定IP |
| 监控工作站 | 192.168.1.11 | 固定IP |
| 电子类测量设备 | 192.168.1.100-109 | 固定IP |
| 光学实验设备 | 192.168.1.110-119 | 固定IP |
| 力学测量设备 | 192.168.1.120-129 | 固定IP |
| 化学分析仪器 | 192.168.1.130-139 | 固定IP |

### 2.3 网络安全配置

1. **防火墙配置**：
   - 允许测试服务器与设备之间的TCP/Socket通信
   - 阻止外部网络访问测试环境
   - 记录所有通信日志

2. **安全连接配置**：
   - 为支持TLS/SSL的设备准备证书
   - 证书保存在 `config/ssl/` 目录下
   - 证书命名规则：`设备型号-cert.pem`

## 三、硬件准备

### 3.1 设备清单

| 设备名称 | 型号 | 数量 | 通信接口 | 通信协议 |
|---------|-----|-----|---------|---------|
| 电子测量仪 | GX-5000 | 2 | RJ45/以太网 | TCP/IP |
| 光谱分析仪 | OS-2500 | 1 | RJ45/以太网 | TCP/IP (SSL) |
| 力学实验系统 | MC-3000 | 1 | RJ45/以太网 | TCP/IP |
| 化学分析仪 | CH-7000 | 1 | RJ45/以太网 | TCP/IP |
| 串口转TCP适配器 | SA-100 | 4 | RS232/USB/RJ45 | TCP/IP |

### 3.2 线缆与适配器

1. **网络线缆**：
   - Cat6以太网线缆 x 10
   - 交叉网线 x 2（备用）

2. **串口线缆**：
   - RS232串口线 x 4
   - USB转RS232适配器 x 2

3. **电源适配器**：
   - 符合各设备规格的电源适配器
   - 带电涌保护的电源插排 x 2

### 3.3 工作站配置

**监控工作站**应具备以下配置：
- 处理器：Intel i7或AMD Ryzen 7以上
- 内存：16GB以上
- 存储：512GB SSD
- 网络：双千兆网卡
- 显示器：至少1080p分辨率，建议双显示器
- 操作系统：Windows 10/11专业版

## 四、软件准备

### 4.1 必需软件

1. **网络监控工具**：
   - Wireshark：用于捕获和分析网络流量
   - iperf3：用于测试网络性能

2. **通信调试工具**：
   - NetCat：用于TCP/UDP连接测试
   - Telnet客户端：用于基本通信测试
   - PuTTY：用于串口和网络连接测试

3. **日志分析工具**：
   - Elasticsearch + Kibana：用于日志聚合和分析（可选）
   - Graylog：用于日志管理（可选）

### 4.2 设备专用软件

1. **厂商提供的设备控制软件**：
   - GX-5000控制软件
   - OS-2500光谱分析软件
   - MC-3000力学测试软件
   - CH-7000化学分析软件

2. **设备驱动程序**：
   - 所有设备的最新驱动程序
   - USB转串口适配器驱动

### 4.3 AI辅助实验平台配置

1. **平台安装**：
   - 按照开发文档在测试服务器上安装平台
   - 配置为测试模式

2. **配置文件准备**：
   - 将所有设备配置文件放入 `config/devices/` 目录
   - 确保配置文件中的IP地址与实际分配一致

## 五、测试准备步骤

### 5.1 物理连接

1. **网络连接**：
   - 连接所有设备到交换机
   - 确保网线连接牢固，指示灯正常
   - 记录每个设备的MAC地址和端口对应关系

2. **电源连接**：
   - 检查所有设备的电源要求
   - 使用稳压电源或UPS保障电源稳定
   - 按设备手册要求顺序开启设备

### 5.2 设备初始化

1. **设备上电自检**：
   - 按照设备手册执行自检程序
   - 记录自检结果

2. **设备网络配置**：
   - 设置每个设备的IP地址、子网掩码和网关
   - 配置设备的通信参数（如波特率、数据位等）
   - 测试设备对ping命令的响应

3. **设备命令测试**：
   - 使用厂商提供的软件验证基本命令
   - 记录每个设备支持的命令集和响应格式

### 5.3 测试环境验证

1. **网络连通性测试**：
   - 使用ping命令测试所有设备的连通性
   - 使用telnet或netcat测试TCP端口连通性
   - 使用iperf3测试网络性能

2. **设备通信验证**：
   - 使用NetCat或PuTTY手动连接每个设备
   - 发送基本命令并验证响应
   - 记录通信过程中的任何异常

## 六、测试执行准备

### 6.1 测试脚本准备

1. **验证测试脚本**：
   - 确保 `run-actual-device-test.ps1` 可在测试环境运行
   - 检查测试脚本的权限设置

2. **测试配置文件验证**：
   - 确认每个设备的配置文件参数正确
   - 验证测试命令在手动测试中工作正常

### 6.2 测试环境监控设置

1. **日志收集**：
   - 配置Wireshark开始捕获网络流量
   - 启动系统日志记录
   - 设置设备日志记录（如适用）

2. **性能监控**：
   - 设置CPU、内存、网络使用率监控
   - 配置测试过程录像（可选）

## 七、测试环境检查清单

使用以下清单确保测试环境已完全准备就绪：

- [ ] 所有设备已通电并通过自检
- [ ] 网络连接已确认，所有设备可以ping通
- [ ] 所有设备的TCP端口可以访问
- [ ] 设备配置文件已更新为实际IP地址和参数
- [ ] 测试脚本可以正常执行
- [ ] 网络监控工具已启动并正在记录
- [ ] 日志记录系统已配置并启动
- [ ] 测试服务器运行正常，资源使用率低
- [ ] 备份设备和线缆已准备就绪
- [ ] 测试团队已了解测试流程和应急预案

## 八、注意事项和建议

1. **电源管理**：
   - 使用UPS防止意外断电
   - 监控设备电源状态

2. **网络隔离**：
   - 确保测试网络与生产网络完全隔离
   - 防止测试影响实际业务系统

3. **数据备份**：
   - 定期备份测试配置和结果
   - 使用版本控制管理配置文件变更

4. **应急预案**：
   - 准备设备重启流程
   - 制定网络问题应急处理方案
   - 准备回退计划

## 九、联系信息

**测试环境管理员**：王测试  
**联系电话**：1234567890  
**电子邮件**：test@ailab.cn

**设备技术支持**：张设备  
**联系电话**：0987654321  
**电子邮件**：device@ailab.cn

---

**文档维护**：测试团队  
**最后更新**：2025年7月23日
